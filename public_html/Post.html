<html>
<title>Post</title>
<script>
  function CreatePost() {
            xhr = new XMLHttpRequest();
            var url = "http://localhost:8080/Microblog/rest/posts";
            xhr.open('POST', url, true);
            xhr.setRequestHeader("Content-type", "application/json");
            xhr.withCredentials = false;
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4) {
                    switch (xhr.status) {
                        case 201:


                            location.href = "listaPost.html";
                            break;
                            
                            
                        case 404:
                            document.getElementById("messages").innerHTML = "Errore 404 ";
                            break;
                        default:
                            document.getElementById("messages").innerHTML = "Non eseguito.";
                    }
                }
            };
            
            
            
            
            
            
            
            var data = JSON.stringify({"titolo": document.getElementById("Titolo").value,
                "testo": document.getElementById("Testo").value,
                "utente": {
                    "id": 1,
                    "username": "admin",
                    "password": "52a0f3250c915c308799c5912c6ebcec8ac8c7779cbfe428f61d1f1e04a01d38",
                    "salt": "MLu/TrZonxKzzqM7ofC0HA==",
                    "permissions": "admin"
                }
            });
            xhr.send(data);
        }
    </script>

 
        <meta charset="utf-8">

    <body>

        <div>
            <div id="messages"></div>
            <div id="postL">
                <h1>Create a new post!</h1>
                <div >
                    <input type="text" id="titolo" placeholder="Title" name="title">
                </div>
                <textarea id="testo" rows="5" name="text"></textarea>
                <button type="submit" onClick="CreatePost()">Nuovo post</button>
            </div>
        </div>
    </body>
</html>
